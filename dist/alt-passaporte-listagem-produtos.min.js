!function(t){"use strict";t.module("alt.passaporte-listagem-produtos",["alt.passaporte-informacoes-autorizacao"]).config(["$httpProvider",function(t){t.defaults.withCredentials=!0}]).provider("AltPassaporteUrlBaseListagemProdutos",[function(){this.url="",this.$get=[function(){return this.url}]}]).service("AltPassaporteListagemProdutosService",["$http","$q","$filter","AltPassaporteAuthorizationInfoService","AltPassaporteUrlBaseListagemProdutos",function(o,a,i,r,s){var e=s+"/passaporte-rest-api/rest/produtos/:prop";this._altPassaporteAuthorizationInfoService=new r(s),this._parseHttp=function(t){var a=e;return a=angular.isUndefined(t)?a.replace("/:prop",""):a.replace(":prop",t),o.get(a).then(function(t){return t.data||{}})},this._adicionaPassaporteNoTopoDaLista=function(o,a,i,r){var s=t.lowercase(a.nome);return s===i?(o.splice(r,1),void o.unshift(a)):void 0},this.ordenaPorNome=function(o){var a=this,r=o||{};return r.habilitados=i("orderBy")(o.habilitados,"nome")||[],t.forEach(r.habilitados,function(t,o){a._adicionaPassaporteNoTopoDaLista(r.habilitados,t,"passaporte admin",o)}),t.forEach(r.habilitados,function(t,o){a._adicionaPassaporteNoTopoDaLista(r.habilitados,t,"passaporte",o)}),r},this._getProdutos=function(o){var i=this;return a.all([this._altPassaporteAuthorizationInfoService.getToken(),this._parseHttp(o)]).then(function(o){var a=o[0],r=o[1];return t.forEach(r.habilitados,function(t){var o=/\?/.test(t.urlAutenticacao)?"&":"?";t.urlAutenticacao=t.urlAutenticacao+o+"info="+a+"&idProduto="+t.chave}),i.ordenaPorNome(r)})},this.getProdutos=function(){return this._getProdutos(void 0)},this.getProdutosHabilitados=function(){return this._getProdutos("habilitados")}}])}(angular);