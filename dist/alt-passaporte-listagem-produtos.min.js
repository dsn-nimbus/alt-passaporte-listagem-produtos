!function(t){"use strict";t.module("alt.passaporte-listagem-produtos",["alt.passaporte-informacoes-autorizacao"]).config(["$httpProvider",function(t){t.defaults.withCredentials=!0}]).provider("AltPassaporteUrlBaseListagemProdutos",[function(){this.url="",this.$get=[function(){return this.url}]}]).service("AltPassaporteListagemProdutosService",["$http","$q","$filter","AltPassaporteAuthorizationInfoService","AltPassaporteUrlBaseListagemProdutos",function(a,o,i,r,e){var s=e+"/passaporte-rest-api/rest/produtos";this._altPassaporteAuthorizationInfoService=new r(e),this._parseHttp=function(){return a.get(s).then(function(t){return t.data||{}})},this._adicionaPassaporteNoTopoDaLista=function(a,o,i,r){var e=t.lowercase(o.nome);return e===i?(a.splice(r,1),void a.unshift(o)):void 0},this.ordenaPorNome=function(a){var o=this,r=a||{};return r.habilitados=i("orderBy")(a.habilitados,"nome")||[],t.forEach(r.habilitados,function(t,a){o._adicionaPassaporteNoTopoDaLista(r.habilitados,t,"passaporte admin",a)}),t.forEach(r.habilitados,function(t,a){o._adicionaPassaporteNoTopoDaLista(r.habilitados,t,"passaporte",a)}),r},this.getProdutos=function(){var a=this;return o.all([this._altPassaporteAuthorizationInfoService.getToken(),this._parseHttp()]).then(function(o){var i=o[0],r=o[1];return t.forEach(r.habilitados,function(t){var a=/\?/.test(t.urlAutenticacao)?"&":"?";t.urlAutenticacao=t.urlAutenticacao+a+"info="+i+"&idProduto="+t.chave}),a.ordenaPorNome(r)})["catch"](function(t){return o.reject(t)})}}])}(angular);